<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprController</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*GAMECAVE EFFECTS ENGINE 3.X
Read the GCE3X documentation before using this code!

Object Name - objMotion_blur
Engine - MotionBlur Engine 
Purpose - Controls the surfaces of the motion-blur and draws it.
*/

global.sky_type = -2; //Set this engines sky.
window_w = window_get_region_width(); //The surface width
window_h = window_get_region_height(); //The surface height
buffer  = surface_create(window_w,window_h); //The buffer-surface
surface = surface_create(window_w,window_h); //The blur-surface
blur_amount = 0.34; //The amount of blur (1 is no blur, 0 is frozen-screen)
fx = window_w/display_get_width(); 
fy = window_h/display_get_height();
set_automatic_draw(0); //Set automatic draw to 0
draw_clear(c_black); //Clear surface memory to black.

view_xspeed = 0; //Speed of the horizontal view-sliding
view_yspeed = 0; //Speed of the vertical view-sliding

version = show_question("Are you using GameMaker Version 6.1 or under?");</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if view_xview[0]&lt;0 {view_xview[0]=0} //Stop the view from going too far.
if view_xview[0]&gt;room_width-view_wview[0] {view_xview[0]=room_width-view_wview[0]} //Likewise

if view_yview[0]&lt;0 {view_yview[0]=0} //Stop the view from going too far.
if view_yview[0]&gt;room_height-view_hview[0] {view_yview[0]=room_height-view_hview[0]} //Likewise
view_xview[0]+=view_xspeed; //Move View appropriately
view_yview[0]+=view_yspeed; //Move View appropriately
if view_xspeed&gt;0 {view_xspeed-=0.1} //Apply Friction to the View-Sliding
else if view_xspeed&lt;0 {view_xspeed+=0.1} //Apply Friction to the View-Sliding
else {view_xspeed=0} //Apply Friction to the View-Sliding

if view_yspeed&gt;0 {view_yspeed-=0.1} //Apply Friction to the View-Sliding
else if view_yspeed&lt;0 {view_yspeed+=0.1} //Apply Friction to the View-Sliding
else {view_yspeed=0} //Apply Friction to the View-Sliding

surface_set_target(buffer); //Set the surface target to the buffer
draw_clear_alpha(c_black,0); 
screen_redraw(); //Redraw the screen, capturing it onto the buffer-surface.

surface_set_target(surface); //Set the surface target to the blur.
draw_clear_alpha(c_black,1);

draw_set_blend_mode_ext(7,11); //Unique Blend Mode
draw_surface(buffer,0,0); //Draw the buffer-surface (screen)
draw_set_blend_mode(bm_normal); //Reset Blend Mode
surface_reset_target(); //Reset Target

//If we're using GM6.1 this script is requires to work around a bug. If you're using 7.0 this script is not used.
if version=1
{
    d3d_transform_set_identity();
    d3d_transform_set_scaling(fx,fy,0);
}

draw_surface_ext(surface,0,0,1,1,0,c_white,blur_amount); //Draw the surface correctly.

d3d_transform_set_identity();
screen_refresh(); //Present the result.</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="40">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if view_yspeed&lt;5 {view_yspeed+=0.2}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*if blur_amount &gt; 0.01 {blur_amount-=0.05}else{blur_amount=0.01}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="39">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if view_xspeed&lt;5 {view_xspeed+=0.2}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="38">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if view_yspeed&gt;-5 {view_yspeed-=0.2}</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*if blur_amount &lt; 1 {blur_amount+=0.05}else{blur_amount=1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="37">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if view_xspeed&gt;-5 {view_xspeed-=0.2}</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>set_automatic_draw(1); //Reset the drawing methods to automatic.
surface_free(buffer);
surface_free(surface);</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
